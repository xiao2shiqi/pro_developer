## å‡½æ•°çš„ä¸€äº›é‡æ„æ‰‹æ³•

é‡æ„çš„èŒƒå›´å¾ˆå¤§ï¼Œæœ‰åŒ…æ‹¬ç±»ç»“æ„ã€å˜é‡ã€å‡½æ•°ã€å¯¹è±¡å…³ç³»ï¼Œè¿˜æœ‰å•å…ƒæµ‹è¯•çš„ä½“ç³»æ„å»ºç­‰ç­‰ã€‚  

åœ¨è¿™ä¸€ç« ï¼Œæˆ‘ä»¬ä¸»è¦åˆ†äº«é‡æ„å‡½æ•°çš„ 7 ä¸ªå°æŠ€å·§ã€‚ğŸ§°

åœ¨é‡æ„çš„ä¸–ç•Œé‡Œï¼Œå‡ ä¹æ‰€æœ‰çš„é—®é¢˜éƒ½æºäºè¿‡é•¿çš„å‡½æ•°å¯¼è‡´çš„ï¼Œå› ä¸ºï¼š
- è¿‡é•¿çš„å‡½æ•°åŒ…å«å¤ªå¤šä¿¡æ¯ï¼Œæ‰¿æ‹…å¤ªå¤šèŒè´£ï¼Œæ— æ³•æˆ–è€…å¾ˆéš¾å¤ç”¨
- é”™ç»¼å¤æ‚çš„é€»è¾‘ï¼Œå¯¼è‡´æ²¡äººæ„¿æ„å»é˜…è¯»ä»£ç ï¼Œç†è§£ä½œè€…çš„æ„å›¾

å¯¹äºè¿‡é•¿å‡½æ•°çš„å¤„ç†æ–¹å¼ï¼Œåœ¨ ã€Šé‡æ„ã€‹ä¸­ä½œè€…æ¨èå¦‚ä¸‹æ‰‹æ³•è¿›è¡Œå¤„ç†ï¼š

### 1ï¼šæç‚¼å‡½æ•°

#### ç¤ºä¾‹ä¸€
æˆ‘ä»¬çœ‹å…ˆä¸€ä¸ªç¤ºä¾‹ï¼ŒåŸå§‹ä»£ç å¦‚ä¸‹ï¼š
```java
void printOwing(double amout) {
  printBanner();
  // Print Details
  System.out.println("name:" + _name);
  System.out.println("amount:" + _amount);
}
```

**Extract Method** çš„é‡æ„æ‰‹æ³•æ˜¯å°†å¤šä¸ª `Println()` æŠ½ç¦»åˆ°ç‹¬ç«‹çš„å‡½æ•°ä¸­ï¼ˆå‡½æ•°éœ€è¦åœ¨å‘½åä¸Šï¼Œä¸‹ç‚¹åŠŸå¤«ï¼‰ï¼Œè¿™é‡Œå¯¹æŠ½ç¦»çš„å‡½æ•°å‘½åæœ‰ 2 ä¸ªå»ºè®®ï¼š
- ä¿æŒå‡½æ•°å°½å¯èƒ½çš„å°ï¼Œå‡½æ•°è¶Šå°ï¼Œè¢«å¤ç”¨çš„å¯èƒ½æ€§è¶Šå¤§
- è‰¯å¥½çš„å‡½æ•°å‘½åï¼Œå¯ä»¥è®©è°ƒç”¨æ–¹çš„ä»£ç çœ‹èµ·æ¥ä¸Šæ³¨é‡Šï¼ˆç»“æ„æ¸…æ™°çš„ä»£ç ï¼Œå…¶å®å¹¶ä¸æ˜¯å¾ˆéœ€è¦æ³¨é‡Šï¼‰

å°† 2 ä¸ª `Println()` æ–¹æ³•æŠ½ç¦»åˆ° `printDetails()` å‡½æ•°ä¸­ï¼š
```java
void printDetails(double amount) {
  System.out.println("name:" + _name);
  System.out.println("amount:" + _amount);
}
```

å½“æˆ‘ä»¬æ‹¥æœ‰ `printDetails()` ç‹¬ç«‹å‡½æ•°åï¼Œé‚£ä¹ˆæœ€ç»ˆ `printOwing()` å‡½æ•°çœ‹èµ·æ¥åƒï¼š
```java
void printOwing(double amout) {
  printBanner();
  printDetails(double amount);
}
```

#### ç¤ºä¾‹äºŒ
ç¤ºä¾‹ä¸€å¯èƒ½è¿‡äºç®€å•ï¼Œæ— æ³•è¡¨ç¤º **Extract Method** çš„å¥‡å¦™èƒ½åŠ›ï¼Œæˆ‘ä»¬é€šè¿‡ä¸€ä¸ªæ›´å¤æ‚çš„æ¡ˆä¾‹æ¥è¡¨ç¤ºï¼Œä»£ç å¦‚ä¸‹ï¼š
```java
void printOwing() {
  Enumeration e = _orders.elements();
  double oustanding = 0.0

  // print banner
  System.out.println("*******************")
  System.out.println("***Customer Owes***")
  System.out.println("*******************")

  // calculate outstanding
  while(e.hasMoreElements()){
    Order each = (Order)e.nextElement();
    outstanding += each.getAmount();
  }

  // print details
  System.out.println("name:" + _name);
  System.out.println("amount:" + outstanding); 
}
```

é¦–å…ˆå®¡è§†ä¸€ä¸‹è¿™æ®µä»£ç ï¼Œè¿™æ˜¯ä¸€æ®µè¿‡é•¿çš„å‡½æ•°ï¼ˆå…¸å‹çš„ç³Ÿç³•ä»£ç çš„ä»£è¡¨ï¼‰ï¼Œå› ä¸ºå®ƒä¼å›¾å»å®Œæˆæ‰€æœ‰çš„äº‹æƒ…ã€‚ä½†é€šè¿‡æ³¨é‡Šæˆ‘ä»¬å¯ä»¥å°†å®ƒçš„å‡½æ•°æç‚¼å‡ºæ¥ï¼Œæ–¹ä¾¿å‡½æ•°å¤ç”¨ï¼Œè€Œä¸” printOwing() ä»£ç ç»“æ„ä¹Ÿä¼šæ›´åŠ æ¸…æ™°ï¼Œæœ€ç»ˆç‰ˆæœ¬å¦‚ä¸‹ï¼š
```java
void printOwing(double previousAmount) {
  printBaner();   // Extract print banner
  double outstanding = getOutstanding(previousAmount * 1.2)   // Extract calculate outstanding
  printDetails(outstanding)   // print details
}
```

`printOwing()` çœ‹èµ·æ¥åƒæ³¨é‡Šçš„ä»£ç ï¼Œå¯¹äºé˜…è¯»éå¸¸å‹å¥½ï¼Œç„¶åçœ‹çœ‹è¢« Extract Method è¢«æç‚¼çš„å‡½æ•°ä»£ç ï¼š
```java
void printBanner() {
  System.out.println("*******************")
  System.out.println("***Customer Owes***")
  System.out.println("*******************")  
}

double getOutstanding(double initialValue) {
  double result = initialValue;   // èµ‹å€¼å¼•ç”¨å¯¹è±¡ï¼Œé¿å…å¯¹å¼•ç”¨ä¼ é€’
  Enumeration e = _orders.elements();
  while(e.hasMoreElements()){
    Order each = (Order)e.nextElement();
    result += each.getAmount();
  }
  return result;
}

void printDetails(double outstanding) {
  System.out.println("name:" + _name);
  System.out.println("amount:" + outstanding); 
}
```

#### æ€»ç»“
æç‚¼å‡½æ•°æ˜¯æœ€å¸¸ç”¨çš„é‡æ„æ‰‹æ³•ä¹‹ä¸€ï¼Œå°±æ˜¯å°†è¿‡é•¿å‡½æ•°æŒ‰èŒè´£æ‹†åˆ†è‡³åˆç†èŒƒå›´ï¼Œè¿™æ ·è¢«æ‹†è§£çš„å‡½æ•°ä¹Ÿæœ‰å¾ˆå¤§çš„æ¦‚ç‡è¢«å¤ç”¨åˆ°å…¶ä»–å‡½æ•°å†…


### 2ï¼šç§»é™¤å¤šä½™å‡½æ•°

å½“å‡½æ•°æ‰¿æ‹…çš„èŒè´£å’Œå†…å®¹è¿‡å°çš„æ—¶å€™ï¼Œæˆ‘ä»¬å°±éœ€è¦å°†ä¸¤ä¸ªå‡½æ•°åˆå¹¶ï¼Œ**é¿å…ç³»ç»Ÿäº§ç”Ÿå’Œåˆ†å¸ƒè¿‡å¤šçš„é›¶æ•£çš„å‡½æ•°**

#### ç¤ºä¾‹ä¸€
å‡å¦‚æˆ‘ä»¬ç¨‹åºä¸­æœ‰ä»¥ä¸‹ 2 ä¸ªå‡½æ•°ï¼Œç¤ºä¾‹ç¨‹åºï¼š
```java
int getRating() {
  return (moreThanFiveLateDeliveries()) ? 2 : 1;
}

boolean moreThanFiveLateDeliveries() {
  return _numberOfLateDeliveries > 5;
}
```

`moreThanFiveLateDeliveries()` ä¼¼ä¹æ²¡æœ‰ä»€ä¹ˆå­˜åœ¨çš„å¿…è¦ï¼Œå› ä¸ºå®ƒä»…ä»…æ˜¯è¿”å›ä¸€ä¸ª `_numberOfLateDeliveries` å˜é‡ï¼Œæˆ‘ä»¬å°±å¯ä»¥ä½¿ç”¨ **Inline Method å†…è”å‡½æ•°** æ¥é‡æ„å®ƒï¼Œä¿®æ”¹åçš„ä»£ç å¦‚ä¸‹ï¼š
```java
int getRating() {
  return (_numberOfLateDeliveries > 5) ? 2 : 1;
}
```
æ³¨æ„äº‹é¡¹ï¼š
- å¦‚æœ `moreThanFiveLateDeliveries()` å·²ç»è¢«å¤šä¸ªè°ƒç”¨æ–¹å¼•ç”¨ï¼Œåˆ™ä¸è¦å»ä¿®æ”¹å®ƒ

#### æ€»ç»“
**Inline Method å†…è”å‡½æ•°** å°±æ˜¯é€»è¾‘å’ŒèŒè´£ç®€å•çš„ï¼Œå¹¶ä¸”åªè¢«ä½¿ç”¨ 1 æ¬¡çš„å‡½æ•°è¿›è¡Œåˆå¹¶å’Œç§»é™¤ï¼Œè®©ç³»ç»Ÿæ•´ä½“ä¿æŒç®€å•å’Œæ•´æ´

### 3ï¼šç§»é™¤ä¸´æ—¶å˜é‡
å…ˆçœ‹ç¤ºä¾‹ä»£ç ï¼š
#### ç¤ºä¾‹ä¸€
```java
double basePrice = anOrder.basePrice();
return basePrice > 1000;
```

ä½¿ç”¨ **Inline Temp Variable** æ¥å†…è” basePrice å˜é‡ï¼Œä»£ç å¦‚ä¸‹ï¼š
```java
return anOrder.basePrice() > 1000;
```

#### æ€»ç»“
å¦‚æœå‡½æ•°å†…çš„ä¸´æ—¶å˜é‡ï¼Œåªè¢«å¼•ç”¨å’Œä½¿ç”¨ä¸€æ¬¡ï¼Œé‚£ä¹ˆå®ƒå°±åº”è¯¥è¢«å†…è”å’Œç§»é™¤ï¼Œé¿å…äº§ç”Ÿè¿‡å¤šå†—ä½™ä»£ç ï¼Œä»è€Œå½±å“é˜…è¯»

### 4ï¼šå‡½æ•°æ›¿ä»£è¡¨è¾¾å¼
å¦‚æœä½ çš„ç¨‹åºä¾èµ–ä¸€æ®µè¡¨è¾¾å¼æ¥è¿›è¡Œé€»è¾‘åˆ¤æ–­ï¼Œé‚£ä¹ˆä½ å¯ä»¥åˆ©ç”¨ä¸€æ®µå‡½æ•°å°è£…è¡¨è¾¾å¼ï¼Œæ¥è®©è®¡ç®—è¿‡ç¨‹æ›´åŠ çµæ´»çš„è¢«å¤ç”¨

#### ç¤ºä¾‹ä¸€
```java
double basePrice = _quantity * _itemPrice;
if (basePrice > 1000) {
  return basePrice * 0.95;
} else {
  return basePrice * 0.98;
}
```

åœ¨ç¤ºä¾‹ä¸€ï¼Œæˆ‘ä»¬å¯ä»¥æŠŠ `basePrice` çš„è®¡ç®—è¿‡ç¨‹å°è£…èµ·æ¥ï¼Œè¿™æ ·å…¶ä»–å‡½æ•°è°ƒç”¨ä¹Ÿæ›´æ–¹ä¾¿ï¼Œé‡æ„åç¤ºä¾‹å¦‚ä¸‹ï¼š
```java

if (basePrice() > 1000) {
  return basePrice() * 0.95;
} else {
  return basePrice() * 0.98;
}

// æŠ½å– basePrice() è®¡ç®—è¿‡ç¨‹
double basePrice() {
  return _quantity * _itemPrice;
}
```

ä»¥ä¸Šç¨‹åºæ¯”è¾ƒç®€å•ï¼Œä¸å¤ªèƒ½çœ‹å‡ºå‡½æ•°æ›¿ä»£è¡¨è¾¾å¼çš„æ•ˆæœï¼Œæˆ‘ä»¬æ¢ä¸€ä¸ªæ›´è´Ÿè´£çš„çœ‹çœ‹ï¼Œå…ˆçœ‹ä¸€æ®µè·å–å•†å“ä»·æ ¼çš„ç¨‹åºï¼š
```java
double getPrice() {
  final int basePrice = _quantity * _itemPrice;
  final double discountFactor;
  if (basePrice > 1000) {
    discountFactor * 0.95;
  } else {
    discountFactor * 0.98;
  }
  return basePrice * discountFactor;
}
```
å¦‚æœæˆ‘ä»¬ä½¿ç”¨ **å‡½æ•°æ›¿ä»£è¡¨è¾¾å¼** çš„é‡æ„æ‰‹æ³•ï¼Œé‚£ä¹ˆç¨‹åºæœ€ç»ˆè¯»èµ·æ¥å¯èƒ½å°±åƒï¼š
```java
double getPrice() {
  // è¯»èµ·æ¥åƒä¸åƒæ³¨é‡Š ï¼Ÿ è¿™é‡Œçš„ä»£ç è¿˜éœ€è¦å†™æ³¨é‡Šå—ï¼Ÿ
  return basePrice() * discountFactor();
}
```
è‡³äº basePrice()ã€discountFactor() æ˜¯æ€ä¹ˆæ‹†è§£çš„ï¼Œè¿™é‡Œå›å¿†ä¸€ä¸‹ **æç‚¼å‡½æ•°** çš„å†…å®¹ï¼Œä»¥ä¸‹æ”¾å‡ºæç‚¼çš„ä»£ç ï¼š
```java
int basePrice() {
  return _quantity * _itemPrice;
}

double discountFactor() {
  final double discountFactor;
  return basePrice() > 1000 ? 0.95 : 0.98;
}
```

#### æ€»ç»“
ä½¿ç”¨å‡½æ•°æ›¿ä»£è¡¨è¾¾å¼æ›¿ä»£è¡¨è¾¾å¼ï¼Œå¯¹äºç¨‹åºæ¥è¯´æœ‰ä»¥ä¸‹å‡ ç‚¹å¥½å¤„ï¼š
1. å°è£…è¡¨è¾¾å¼çš„è®¡ç®—è¿‡ç¨‹ï¼Œè°ƒç”¨æ–¹æ— éœ€å…³å¿ƒç»“æœæ˜¯æ€ä¹ˆè®¡ç®—å‡ºæ¥çš„ï¼Œç¬¦åˆ OOP åŸåˆ™
2. å½“è®¡ç®—è¿‡ç¨‹å‘ç”Ÿæ”¹åŠ¨ï¼Œä¹Ÿä¸ä¼šå½±å“è°ƒç”¨æ–¹ï¼Œåªè¦ä¿®æ”¹å‡½æ•°æœ¬èº«å³å¯

### 5ï¼šå¼•å…¥è§£é‡Šå˜é‡
å½“ä½ çš„ç¨‹åºå†…éƒ¨å‡ºç°å¤§é‡æ™¦æ¶©éš¾æ‡‚çš„è¡¨è¾¾å¼ï¼Œå½±å“åˆ°ç¨‹åºé˜…è¯»çš„æ—¶å€™ï¼Œä½ éœ€è¦ **å¼•å…¥è§£é‡Šå˜é‡** æ¥è§£å†³è¿™ä¸ªé—®é¢˜ï¼Œä¸ç„¶ä»£ç å®¹æ˜“å˜çš„è…çƒ‚ï¼Œä»è€Œå¯¼è‡´å¤±æ§ã€‚å¦å¤–å¼•å…¥è§£é‡Šå˜é‡ä¹Ÿä¼šè®©åˆ†æ”¯è¡¨è¾¾å¼æ›´å¥½ç†è§£ã€‚

#### ç¤ºä¾‹ä¸€
æˆ‘ä»¬å…ˆçœ‹ä¸€æ®µä»£ç ï¼ˆæˆ‘æ•¢ä¿è¯è¿™æ®µä»£ç ä½ çœ‹çš„è‚¯å®šä¼šå¾ˆå¤´ç–¼ã€‚ã€‚ã€‚ğŸ’†ï¼‰
```java
if (platform.tpUpperCase().indexOf("MAC") > -1 && browser.toUpperCase().indexOf("IE") > -1 && 
wasInitialized() && resize > 0) {
    // do something ....
}
```
ä½¿ç”¨ **å¼•å…¥è§£é‡Šå˜é‡** çš„æ–¹æ³•æ¥é‡æ„å®ƒçš„è¯ï¼Œä¼šè®©ä½ å–èµ·æ¥æœ‰ä¸åŒçš„æ„Ÿå—ï¼Œä»£ç å¦‚ä¸‹ï¼š
```java
final boolean isMacOs = platform.tpUpperCase().indexOf("MAC") > -1;
final boolean isIEBrowser = browser.toUpperCase().indexOf("IE") > -1;
final boolean wasResized = resize > 0;

if (isMacOs && isIEBrowser && wasInitialized() && wasResized()) {
  // do something ...
}
```
è¿™æ ·åšè¿˜æœ‰ä¸€ä¸ªå¥½å¤„å°±æ˜¯ï¼Œåœ¨ Debug ç¨‹åºçš„æ—¶å€™ä½ å¯ä»¥æå‰çŸ¥é“æ¯æ®µè¡¨è¾¾å¼çš„ç»“æœï¼Œä¸å¿…ç­‰åˆ°æ‰§è¡Œåˆ° `IF` çš„æ—¶å€™å†æ¨ç®—

#### ç¤ºä¾‹äºŒ
å…¶å® **å¼•å…¥è§£é‡Šå˜é‡** ï¼Œåªæ˜¯è§£å†³é—®é¢˜çš„æ–¹å¼ä¹‹ä¸€ï¼Œå¤ä¹ æˆ‘ä»¬åˆšæ‰æåˆ°çš„ æç‚¼å‡½æ•°ä¹Ÿèƒ½è§£å†³è¿™ä¸ªé—®é¢˜ï¼Œæˆ‘ä»¬å†æ¥çœ‹ä¸€æ®µå®¹æ˜“å¼•èµ·ç”Ÿç†ä¸é€‚çš„ä»£ç  ğŸ˜¤ï¼š
```java
double price() {
// price is base price - quantity discount + shipping 
return (_quantity * _itemPrice) - 
    Math.max(0, _quantity - 500) * _itemPrice * 0.05 + 
    Math.min(_quantity * _itemPrice * 0.1, 100.0);
}
```
æˆ‘ä»¬ä½¿ç”¨ Extract Method æç‚¼å‡½æ•°å¤„ç†ä»£ç åï¼Œé‚£ä¹ˆå®ƒè¯»èµ·æ¥å°±åƒæ˜¯è¿™æ ·ï¼š
```java
double price() {
  return basePrice() - quantityDiscount() + shipping();
}
```
æœ‰æ²¡æœ‰æ„Ÿå—åˆ°ä»€ä¹ˆå«å¥½çš„ä»£ç å°±åƒå¥½çš„æ–‡ç« ï¼ŸğŸ‘©â€ğŸŒ¾ è¿™æ ·çš„ä»£ç æ ¹æœ¬ä¸ç”¨å†™æ³¨é‡Šäº†ï¼Œå½“ç„¶æŠŠè¢«æç‚¼çš„å‡½æ•°ä¹Ÿæ”¾å‡ºæ¥ï¼š
```java
private double quantityDiscount() {
  return Math.max(0, _quantity - 500) * _itemPrice * 0.05;
}

private double shipping() {
  return Math.min(_quantity * _itemPrice * 0.1, 100.0);
}

private double basePrice() {
  return (_quantity * _itemPrice);
}
```

#### æ€»ç»“
å½“ç„¶å¤§å¤šæ•°åœºæ™¯æ˜¯å¯ä»¥ä½¿ç”¨ Extract Method æç‚¼å‡½æ•°æ¥æ›¿ä»£å¼•å…¥è§£é‡Šå˜é‡æ¥è§£å†³é—®é¢˜ï¼Œä½†è¿™å¹¶ä¸ä»£è¡¨ **å¼•å…¥è§£é‡Šå˜é‡** è¿™ç§é‡æ„æ‰‹æ³•å°±æ¯«æ— ç”¨å¤„ï¼Œæˆ‘ä»¬è¿˜æ˜¯å¯ä»¥æ ¹æ®ä¸€äº›ç‰¹å®šçš„åœºæ™¯æ¥æ‰¾åˆ°å®ƒçš„ä½¿ç”¨åœºæ™¯ï¼š
- å½“ Extract Method æç‚¼å‡½æ•°ä½¿ç”¨æˆæœ¬æ¯”è¾ƒé«˜ï¼Œå¹¶ä¸”éš¾ä»¥è¿›è¡Œæ—¶â€¦â€¦
- å½“é€»è¾‘è¡¨è¾¾å¼è¿‡äºæ–¹æ³•ï¼Œå¹¶ä¸”åªä½¿ç”¨ä¸€æ¬¡çš„æ—¶å€™ï¼ˆå¦‚æœä¼šè¢«å¤ç”¨ï¼Œæ¨èä½¿ç”¨ æç‚¼å‡½æ•° æ–¹å¼ï¼‰

### 6ï¼šé¿å…ä¿®æ”¹å‡½æ•°å‚æ•°
è™½ç„¶ä¸åŒçš„ç¼–ç¨‹è¯­è¨€çš„å‡½æ•°å‚æ•°ä¼ é€’ä¼šåŒºåˆ†ï¼šâ€œæŒ‰å€¼ä¼ é€’â€ã€â€œæŒ‰å¼•ç”¨ä¼ é€’â€çš„ä¸¤ç§æ–¹å¼ï¼ˆJava è¯­è¨€çš„ä¼ é€’æ–¹å¼æ˜¯æŒ‰å€¼ä¼ é€’ï¼‰ï¼Œè¿™é‡Œä¸å°±è®¨è®ºä¸¤ç§ä¼ é€’æ–¹å¼çš„åŒºåˆ«ï¼Œç›¸ä¿¡å¤§å®¶éƒ½çŸ¥é“ã€‚

#### ç¤ºä¾‹ä¸€
æˆ‘ä»¬ä¸åº”è¯¥ç›´æ¥å¯¹ inputVal å‚æ•°è¿›è¡Œä¿®æ”¹ï¼Œä½†æ˜¯å¦‚æœç›´æ¥ä¿®æ”¹å‡½æ•°çš„å‚æ•°ä¼šè®©äººææ··ä¹±è¿™ä¸¤ç§æ–¹å¼ï¼Œå¦‚ä¸‹ä»¥ä¸‹ä»£ç ï¼š
```java
int discount (int inputVal) {
  if (inputVal > 50) {
    intputVal -= 2;
  }
  return intputVal;
}
```
å¦‚æœæ˜¯åœ¨ **å¼•ç”¨ä¼ é€’** ç±»å‹çš„ç¼–ç¨‹è¯­è¨€é‡Œï¼Œ`discount()` å‡½æ•°å¯¹äº intputVal å˜é‡çš„ä¿®æ”¹ï¼Œç”šè‡³è¿˜ä¼šå½±å“åˆ°è°ƒç”¨æ–¹ã€‚æ‰€ä»¥æˆ‘ä»¬æ­£ç¡®çš„åšæ³•åº”è¯¥æ˜¯ä½¿ç”¨ä¸€ä¸ªä¸´æ—¶å˜é‡æ¥å¤„ç†å¯¹å‚æ•°çš„ä¿®æ”¹ï¼Œä»£ç å¦‚ä¸‹ï¼š
```java
int discount (int inputVal) {
  int result = inputVal;
  if (inputVal > 50) {
    result -= 2;
  }
  return result;
}
```

#### è¾©è¯çš„çœ‹å¾…æŒ‰å€¼ä¼ é€’
ä¼—æ‰€å‘¨çŸ¥åœ¨æŒ‰å€¼ä¼ é€’çš„ç¼–ç¨‹è¯­è¨€ä¸­ï¼Œä»»ä½•å¯¹å‚æ•°çš„ä»»ä½•ä¿®æ”¹ï¼Œéƒ½ä¸ä¼šå¯¹è°ƒç”¨ç«¯é€ æˆä»»ä½•å½±å“ã€‚ä½†æ˜¯å¦‚ä½•ä¸åŠ ä»¥åŒºåˆ†ï¼Œè¿™ç§ç‰¹æ€§ä¾ç„¶ä¼šè®©ä½ æ„Ÿåˆ°å›°æƒ‘ğŸ˜´ï¼Œæˆ‘ä»¬å…ˆçœ‹ä¸€æ®µæ­£å¸¸çš„ä»£ç ï¼š
```java
public class Param {
    public static void main(String[] args) {
        int x = 5;
        triple(x);
        System.out.println("x after triple: " + x);
    }

    private static void triple (int arg) {
        arg = arg * 3;
        System.out.println("arg in triple: " + arg);
    }
}
```
è¿™æ®µä»£ç ä¸å®¹æ˜“å¼•èµ·å›°æƒ‘ï¼Œä¹ æƒ¯æŒ‰å€¼ä¼ é€’çš„å°ä¼™ä¼´ï¼Œåº”è¯¥äº†è§£å®ƒçš„è¾“å‡ºä¼šå¦‚ä¸‹ï¼š
```sh
arg in triple: 15
x after triple: 5
```
ä½†æ˜¯å¦‚æœå‡½æ•°çš„å‚æ•°æ˜¯å¯¹è±¡ï¼Œä½ å¯èƒ½å°±ä¼šè§‰å¾—å›°æƒ‘äº†ï¼Œæˆ‘ä»¬å†çœ‹ä¸€ä¸‹ä»£ç ï¼ŒæŠŠå‡½æ•°å¯¹è±¡æ”¹ä¸ºå¯¹è±¡è¯•è¯•ï¼š
```java
public class Param {
    public static void main(String[] args) {
        Date d1 = new Date("1 Apr 98");
        nextDateUpdate(d1);
        System.out.println("d1 after nextDay:" + d1);
        Date d2 = new Date("1 Apr 98");
        nextDateReplace(d2);
        System.out.println("d2 after nextDay:" + d2);
    }

    private static void nextDateUpdate(Date arg) {
        // ä¸æ˜¯è¯´æŒ‰å€¼ä¼ é€’å—ï¼Ÿæ€ä¹ˆè¿™é‡Œä¿®æ”¹å¯¹è±¡å½±å“å¤–éƒ¨äº†ã€‚ã€‚
        arg.setDate(arg.getDate() + 1);;
        System.out.println("arg in nextDay: " + arg);
    }

    private static void nextDateReplace(Date arg) {
        // å°è¯•æ”¹å˜å¯¹è±¡çš„å¼•ç”¨ï¼Œåˆä¸ç”Ÿæ•ˆã€‚ã€‚what the fuck ?
        arg = new Date(arg.getYear(), arg.getMonth(), arg.getDate() + 1);
        System.out.println("arg in nextDay: " + arg);
    }
}
```
æœ€ç»ˆè¾“å‡ºå¦‚ä¸‹ï¼Œæœ‰æ²¡æœ‰è¢«å¼„çš„å¾ˆè¿·ç³Š ï¼ŸğŸ¤£ï¼š
```sh
arg in nextDay: Thu Apr 02 00:00:00 CST 1998
d1 after nextDay:Thu Apr 02 00:00:00 CST 1998
arg in nextDay: Thu Apr 02 00:00:00 CST 1998
d2 after nextDay:Wed Apr 01 00:00:00 CST 1998
```

#### æ€»ç»“
å¯¹äºè¦ä¿®æ”¹çš„å‡½æ•°å˜é‡ï¼Œä¹–ä¹–çš„ä½¿ç”¨ä¸´æ—¶å˜é‡ï¼Œé¿å…é€ æˆæ··ä¹±

### 7ï¼šæ›¿æ¢æ›´ä¼˜é›…çš„å‡½æ•°å®ç°

#### ç¤ºä¾‹ä¸€
è°éƒ½æœ‰å¹´å°‘æ— çŸ¥ï¼Œä¸çŸ¥å¤©é«˜åœ°åšå’Œè½»ç‹‚çš„æ—¶å€™ï¼Œé‚£æ—¶å€™çš„æˆ‘ä»¬å°±å®¹æ˜“å†™ä¸‹è¿™æ ·çš„ä»£ç ï¼š
```java
String foundPerson(String[] people) {
  for (int i = 0; i < perple.length; i++) {

    if (peole[i].equals("Trevor")) {
      return "Trevor";
    }
    if (peole[i].equals("Jim")) {
      return "Jim";
    }
    if (peole[i].equals("Phoenix")) {
      return "Phoenix";
    }

    // å¼Šç«¯ï¼šå¦‚æœåŠ å…¥æ–°äººï¼Œåˆè¦å†™å¾ˆå¤šé‡å¤çš„é€»è¾‘å’Œä»£ç 
    // è¿™ç§ä»£ç å†™èµ·æ¥å¥½æ— èŠã€‚ã€‚è€Œä¸” CV å¤§æ³•ä¹Ÿå®¹æ˜“å‡ºé”™
  }
}
```
é‚£æ—¶å€™æˆ‘ä»¬ä»£ç å†™çš„ä¸å¥½ï¼Œè¿˜ä¸è‡ªçŸ¥ï¼Œä½†éšç€æˆ‘ä»¬çš„èƒ½åŠ›å’Œç»éªŒçš„å¢æ”¹ï¼Œæˆ‘ä»¬å›å¤´çœ‹çœ‹è‡ªå·±çš„ä»£ç ï¼Œè¿™ç®€ç›´æ˜¯ä¸€å¨ ğŸ’© ä½†æ˜¯å¹´è½»äººå˜›ï¼Œæ€»å½’è¦çŠ¯ä¸€äº›é”™è¯¯ï¼Œä½›è¯´ï¼šçŸ¥é”™èƒ½æ”¹å–„è«å¤§ç„‰ã€‚ç°åœ¨æˆ‘ä»¬å˜ç‰›é€¼ ğŸ‚ äº†ï¼Œå¯¹äºæ›¾ç»çš„ç³Ÿç³•ä»£ç è‚¯å®šä¸èƒ½ä¸é—»ä¸é—®ï¼Œæ‰€ä»¥çš„é‡æ„å°±æ˜¯ï¼Œ**åœ¨ä¸æ›´æ”¹è¾“å…¥å’Œè¾“å‡ºçš„æƒ…å†µä¸‹ï¼Œç»™ä»–æ›¿æ¢ä¸€ç§æ›´ä¼˜é›…çš„å®ç°**ï¼Œä»£ç å¦‚ä¸‹ï¼š
```java
String foundPerson(String[] people) {
  // åŠ å…¥æ–°äººï¼Œæˆ‘ä»¬æ‰©å±•æ•°ç»„å°±å¥½äº†
  List condidates = Arrays.asList(new String[] {"Trevor", "Jim", "Phoenix"});
  // é€»è¾‘ä»£ç ä¸åŠ¨ï¼Œä¸å®¹æ˜“å‡ºé”™
  for (int i = 0; i <= people.length; i++) {
    if (condidates.equals(people[i])) {
      return people[i]
    }
  }
}
```

#### æ€»ç»“
å»ºè®®ï¼šåœ¨æˆ‘ä»¬å›é¡¾æ›¾ç»çš„ä»£ç çš„æ—¶å€™ï¼Œå¦‚æœä½ æœ‰æ›´å¥½çš„å®ç°æ–¹æ¡ˆï¼ˆä¿è¯è¾“å…¥è¾“å‡ºç›¸åŒçš„å‰æä¸‹ï¼‰ï¼Œå°±åº”è¯¥ç›´æ¥æ›¿æ¢æ‰å®ƒ  
PSï¼šè®°å¾—é€šè¿‡å•å…ƒæµ‹è¯•å†æäº¤ä»£ç ï¼ˆä¸æƒ³è¢«äººæ‰“çš„è¯ï¼‰

å‚è€ƒæ–‡çŒ®ï¼š
* [ã€Šé‡æ„ï¼šRefactoring: Improving the Design of Existing Codeã€‹](https://book.douban.com/subject/4262627/)